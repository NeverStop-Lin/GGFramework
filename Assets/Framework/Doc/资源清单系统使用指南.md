# èµ„æºæ¸…å•ç³»ç»Ÿä½¿ç”¨æŒ‡å—

> **ç‰ˆæœ¬**: v2.0.0  
> **åŠŸèƒ½**: Addressable èµ„æºæ¸…å•ç”Ÿæˆä¸ä½¿ç”¨

---

## ğŸ“‹ ä»€ä¹ˆæ˜¯èµ„æºæ¸…å•

èµ„æºæ¸…å•æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ Addressable èµ„æºç´¢å¼•çš„æ–‡ä»¶ï¼Œæ¡†æ¶é€šè¿‡æŸ¥è¯¢æ¸…å•å¿«é€Ÿåˆ¤æ–­èµ„æºä½ç½®ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜åŠ è½½æ–¹å¼ã€‚

**æ¸…å•æ–‡ä»¶**ï¼š`Assets/Generations/Resources/AddressableResourceManifest.asset`

---

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### æ­¥éª¤1ï¼šç”Ÿæˆæ¸…å•

#### æ–¹æ³•1ï¼šä½¿ç”¨èœå•å·¥å…·ï¼ˆæ¨èï¼‰

```
Unity ç¼–è¾‘å™¨ï¼š
Tools â†’ èµ„æºç®¡ç† â†’ ç”Ÿæˆ Addressable æ¸…å•

æ“ä½œï¼š
1. ç‚¹å‡»"ç”Ÿæˆèµ„æºæ¸…å•"æŒ‰é’®
2. ç­‰å¾…æ‰«æå®Œæˆ
3. æŸ¥çœ‹ç”Ÿæˆç»“æœ
```

#### æ–¹æ³•2ï¼šè‡ªåŠ¨ç”Ÿæˆ

```
Unity ç¼–è¾‘å™¨ï¼š
Tools â†’ èµ„æºç®¡ç† â†’ è‡ªåŠ¨ç”Ÿæˆæ¸…å•ï¼ˆæ„å»ºæ—¶ï¼‰
```

### æ­¥éª¤2ï¼šè¿è¡Œæ—¶ä½¿ç”¨

```csharp
// æ¡†æ¶è‡ªåŠ¨åŠ è½½æ¸…å•ï¼Œæ— éœ€é¢å¤–ä»£ç 
// ç›´æ¥ä½¿ç”¨èµ„æºåŠ è½½æ¥å£å³å¯

var prefab = await GridFramework.Resource.LoadAsync<GameObject>("UI/Prefabs/MainMenu");
// æ¡†æ¶è‡ªåŠ¨æŸ¥è¯¢æ¸…å•å¹¶é€‰æ‹©åŠ è½½æ–¹å¼
```

---

## ğŸ› ï¸ æ¸…å•ç”Ÿæˆå™¨çª—å£

### çª—å£åŠŸèƒ½

```
ä½ç½®ï¼šTools â†’ èµ„æºç®¡ç† â†’ ç”Ÿæˆ Addressable æ¸…å•

åŠŸèƒ½æŒ‰é’®ï¼š
â”œâ”€ ç”Ÿæˆèµ„æºæ¸…å• - æ‰«æå¹¶ç”Ÿæˆæ¸…å•
â”œâ”€ æŸ¥çœ‹æ¸…å•æ–‡ä»¶ - åœ¨ Project çª—å£å®šä½
â””â”€ æ¸…ç©ºæ¸…å• - æ¸…é™¤æ¸…å•æ•°æ®

æ˜¾ç¤ºä¿¡æ¯ï¼š
â”œâ”€ æ¸…å•è·¯å¾„
â”œâ”€ æœ€åç”Ÿæˆæ—¶é—´
â””â”€ èµ„æºæ•°é‡
```

### ç”Ÿæˆç»“æœ

```
ç”Ÿæˆå®Œæˆåæ˜¾ç¤ºï¼š
- æ‰«æçš„èµ„æºæ•°é‡
- ç”Ÿæˆæ—¶é—´
- æ¸…å•æ–‡ä»¶è·¯å¾„
```

---

## ğŸ“ æ¸…å•å†…å®¹

### åŒ…å«ä¿¡æ¯

æ¸…å•ä¸­æ¯ä¸ªèµ„æºæ¡ç›®åŒ…å«ï¼š

| å­—æ®µ | è¯´æ˜ | ç”¨é€” |
|------|------|------|
| `address` | èµ„æºåœ°å€ | è¿è¡Œæ—¶æŸ¥è¯¢ |
| `assetType` | èµ„æºç±»å‹ | ç±»å‹åˆ¤æ–­ |
| `guid` | èµ„æºGUID | å”¯ä¸€æ ‡è¯† |
| `physicalPath` | ç‰©ç†è·¯å¾„ | è°ƒè¯•å®šä½ |
| `groupName` | æ‰€å±åˆ†ç»„ | åˆ†ç»„ç®¡ç† |

### æ•°æ®ç¤ºä¾‹

```json
{
  "generatedTime": "2024-01-15 10:30:00",
  "totalCount": 150,
  "resources": [
    {
      "address": "Game/UI/Prefabs/main_menu",
      "assetType": "GameObject",
      "guid": "abc123...",
      "physicalPath": "Assets/AddressableAssets/Game/UI/Prefabs/main_menu.prefab",
      "groupName": "UI Group"
    }
  ]
}
```

---

## ğŸ’» ä»£ç ä½¿ç”¨

### åŸºæœ¬ä½¿ç”¨

```csharp
public class Example : MonoBehaviour
{
    async void Start()
    {
        // åŠ è½½èµ„æºï¼ˆæ¡†æ¶è‡ªåŠ¨æŸ¥è¯¢æ¸…å•ï¼‰
        var ui = await GridFramework.Resource.LoadAsync<GameObject>("Game/UI/Prefabs/main_menu");
        var audio = await GridFramework.Resource.LoadAsync<AudioClip>("Game/Audio/Music/bgm_battle");
        
        // æ— éœ€å…³å¿ƒèµ„æºåœ¨ Resources è¿˜æ˜¯ Addressables
    }
}
```

### æŸ¥çœ‹æ¸…å•çŠ¶æ€

```csharp
using Framework.Core.Resource;

public class ResourceDebugger : MonoBehaviour
{
    void PrintManifestInfo()
    {
        var center = GridFramework.Resource as ResourceCenter;
        var autoLoader = center.GetLoader(ResourceLoaderType.Auto) as AutoResourceLoader;
        
        if (autoLoader != null)
        {
            Debug.Log($"æ¸…å•çŠ¶æ€: {(autoLoader.ManifestLoaded ? "å·²åŠ è½½" : "æœªåŠ è½½")}");
            Debug.Log($"æ¸…å•èµ„æºæ•°: {autoLoader.ManifestResourceCount}");
            Debug.Log($"Addressables å¯ç”¨: {autoLoader.AddressablesAvailable}");
        }
    }
}
```

### é‡æ–°åŠ è½½æ¸…å•

```csharp
public class ResourceManager : MonoBehaviour
{
    void ReloadManifest()
    {
        var center = GridFramework.Resource as ResourceCenter;
        var autoLoader = center.GetLoader(ResourceLoaderType.Auto) as AutoResourceLoader;
        
        if (autoLoader != null)
        {
            autoLoader.ReloadManifest();
            Debug.Log("æ¸…å•å·²é‡æ–°åŠ è½½");
        }
    }
}
```

---

## ğŸ“Š å·¥ä½œæµç¨‹

### å¼€å‘æµç¨‹

```
1. å¼€å‘é˜¶æ®µ
   â”œâ”€ èµ„æºæ”¾åœ¨ Game/Resources/ æˆ– Game/Art/
   â””â”€ å¿«é€Ÿè¿­ä»£å¼€å‘

2. æ ‡è®° Addressable
   â”œâ”€ é€‰ä¸­èµ„æºï¼Œå‹¾é€‰ "Addressable"
   â””â”€ è®¾ç½® Address

3. ç”Ÿæˆæ¸…å•
   â”œâ”€ Tools â†’ ç”Ÿæˆ Addressable æ¸…å•
   â””â”€ æ¸…å•æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ

4. è¿è¡Œæµ‹è¯•
   â””â”€ ä»£ç æ— éœ€ä¿®æ”¹ï¼Œè‡ªåŠ¨ä½¿ç”¨æ¸…å•
```

### æ›´æ–°æµç¨‹

```
æ·»åŠ /åˆ é™¤/ä¿®æ”¹ Addressable èµ„æº
  â†“
Tools â†’ ç”Ÿæˆ Addressable æ¸…å•
  â†“
æ¸…å•è‡ªåŠ¨æ›´æ–°
  â†“
è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæ•ˆ
```

---

## ğŸ“ æ–‡ä»¶ä½ç½®

### æ¸…å•æ–‡ä»¶

```
ç‰©ç†ä½ç½®ï¼š
Assets/Generations/Resources/AddressableResourceManifest.asset

åŠ è½½è·¯å¾„ï¼š
"AddressableResourceManifest"

è¯´æ˜ï¼š
- Generations/Resources/ ä¼šè¢« Unity è¯†åˆ«ä¸º Resources ç›®å½•
- è¿è¡Œæ—¶è‡ªåŠ¨åŠ è½½
- æ–‡ä»¶å¾ˆå°ï¼ˆå‡ KBï¼‰ï¼Œä¸å½±å“åŒ…ä½“
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. åŠæ—¶æ›´æ–°æ¸…å•

```
ä½•æ—¶é‡æ–°ç”Ÿæˆï¼Ÿ
â”œâ”€ æ·»åŠ  Addressable èµ„æº
â”œâ”€ åˆ é™¤ Addressable èµ„æº
â”œâ”€ ä¿®æ”¹ Address
â””â”€ æ„å»ºå‰

æ“ä½œï¼š
Tools â†’ èµ„æºç®¡ç† â†’ ç”Ÿæˆ Addressable æ¸…å•
```

### 2. ç‰ˆæœ¬æ§åˆ¶

```
å»ºè®®æäº¤æ¸…å•æ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼š
âœ… AddressableResourceManifest.asset
âœ… AddressableResourceManifest.asset.meta

å›¢é˜Ÿå…±äº«æ¸…å•ï¼Œä¿æŒä¸€è‡´
```

### 3. é™çº§æœºåˆ¶

```
æ¸…å•åŠ è½½å¤±è´¥æ—¶ï¼š
â””â”€ è‡ªåŠ¨ä½¿ç”¨è¯•é”™æ¨¡å¼
   â”œâ”€ å…ˆå°è¯• Resources
   â””â”€ å†å°è¯• Addressables

åŠŸèƒ½æ­£å¸¸ï¼Œæ€§èƒ½ç¨æ…¢
```

---

## ğŸ¯ å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå…³å¡åŠ è½½

```csharp
public class LevelLoader : MonoBehaviour
{
    async void LoadLevel(int levelId)
    {
        ShowLoadingScreen();
        
        // é¢„åŠ è½½å…³å¡èµ„æºï¼ˆæ¡†æ¶è‡ªåŠ¨æŸ¥è¯¢æ¸…å•ï¼‰
        await GridFramework.Resource.PreloadAsync(
            progress => UpdateProgress(progress),
            $"Game/Scenes/level_{levelId:D2}",
            "Game/UI/Prefabs/battle_hud",
            $"Game/Audio/Music/bgm_level_{levelId:D2}",
            "Game/3D/Prefabs/Characters/enemy_goblin"
        );
        
        HideLoadingScreen();
        StartLevel();
    }
}
```

### ç¤ºä¾‹2ï¼šUIç®¡ç†

```csharp
public class UIManager : MonoBehaviour
{
    async void OpenUI(string uiName)
    {
        // åŠ è½½UIï¼ˆè‡ªåŠ¨æŸ¥è¯¢æ¸…å•ï¼‰
        var uiPrefab = await GridFramework.Resource.LoadAsync<GameObject>(
            $"Game/UI/Prefabs/{uiName}"
        );
        
        if (uiPrefab != null)
        {
            Instantiate(uiPrefab, uiRoot);
        }
    }
    
    void CloseUI(string uiName)
    {
        // é‡Šæ”¾èµ„æº
        GridFramework.Resource.Release($"Game/UI/Prefabs/{uiName}");
    }
}
```

### ç¤ºä¾‹3ï¼šéŸ³é¢‘åŠ è½½

```csharp
public class AudioManager : MonoBehaviour
{
    async void PlayMusic(string musicName)
    {
        // åŠ è½½èƒŒæ™¯éŸ³ä¹
        var clip = await GridFramework.Resource.LoadAsync<AudioClip>(
            $"Game/Audio/Music/{musicName}"
        );
        
        if (clip != null)
        {
            musicSource.clip = clip;
            musicSource.Play();
        }
    }
    
    async void PlayEffect(string effectName)
    {
        // åŠ è½½éŸ³æ•ˆ
        var clip = await GridFramework.Resource.LoadAsync<AudioClip>(
            $"Game/Audio/Effects/{effectName}"
        );
        
        if (clip != null)
        {
            AudioSource.PlayClipAtPoint(clip, Camera.main.transform.position);
        }
    }
}
```

---

## ğŸ” è°ƒè¯•å·¥å…·

### æŸ¥çœ‹æ¸…å•ä¿¡æ¯

```csharp
[ContextMenu("æŸ¥çœ‹æ¸…å•ä¿¡æ¯")]
void PrintManifestInfo()
{
    var center = GridFramework.Resource as ResourceCenter;
    var autoLoader = center.GetLoader(ResourceLoaderType.Auto) as AutoResourceLoader;
    
    if (autoLoader != null)
    {
        Debug.Log("===== èµ„æºæ¸…å•ä¿¡æ¯ =====");
        Debug.Log($"æ¸…å•å·²åŠ è½½: {autoLoader.ManifestLoaded}");
        Debug.Log($"æ¸…å•èµ„æºæ•°: {autoLoader.ManifestResourceCount}");
        Debug.Log($"Addressables å¯ç”¨: {autoLoader.AddressablesAvailable}");
    }
}
```

### æ§åˆ¶å°è¾“å‡º

```
[AutoResourceLoader] è‡ªåŠ¨èµ„æºåŠ è½½å™¨åˆå§‹åŒ–å®Œæˆ
  - Addressables å¯ç”¨: True
  - èµ„æºæ¸…å•: å·²åŠ è½½ï¼ˆ150 ä¸ªèµ„æºï¼‰
  - æŸ¥è¯¢æ–¹å¼: æ¸…å•æŸ¥è¯¢ï¼ˆ0msï¼‰â­â­â­

[AutoResourceLoader] æ¸…å•å‘½ä¸­ï¼Œä½¿ç”¨ Addressables: Game/UI/Prefabs/main_menu
[AutoResourceLoader] âœ… Addressables åŠ è½½æˆåŠŸ

[AutoResourceLoader] æ¸…å•æœªå‘½ä¸­ï¼Œä½¿ç”¨ Resources: UI/Icons/gold
[AutoResourceLoader] âœ… Resources åŠ è½½æˆåŠŸ
```

---

## ğŸ“ FAQ

### Q1: æ¸…å•å¿…é¡»ç”Ÿæˆå—ï¼Ÿ

ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å¼ºçƒˆæ¨èç”Ÿæˆæ¸…å•ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚

### Q2: æ¸…å•å¤šä¹…æ›´æ–°ä¸€æ¬¡ï¼Ÿ

æ¯æ¬¡ Addressable èµ„æºå˜åŒ–åé‡æ–°ç”Ÿæˆå³å¯ã€‚

### Q3: æ¸…å•ä¼šå¢åŠ åŒ…ä½“å—ï¼Ÿ

å‡ ä¹ä¸ä¼šï¼Œæ¸…å•æ–‡ä»¶å¾ˆå°ï¼ˆ100ä¸ªèµ„æºçº¦10KBï¼‰ã€‚

### Q4: æ¸…å•åŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

æ¡†æ¶ä¼šè‡ªåŠ¨é™çº§åˆ°è¯•é”™æ¨¡å¼ï¼ŒåŠŸèƒ½ä¸å—å½±å“ã€‚

---

## âœ… ä½¿ç”¨è¦ç‚¹

1. **æ„å»ºå‰ç”Ÿæˆæ¸…å•** - Tools â†’ ç”Ÿæˆ Addressable æ¸…å•
2. **æ¸…å•æ–‡ä»¶æäº¤ç‰ˆæœ¬æ§åˆ¶** - å›¢é˜Ÿå…±äº«
3. **ä»£ç æ— éœ€ä¿®æ”¹** - æ¡†æ¶è‡ªåŠ¨å¤„ç†
4. **èµ„æºå˜åŒ–åé‡æ–°ç”Ÿæˆ** - ä¿æŒæ¸…å•æœ€æ–°

---

**ä½¿ç”¨æ¸…å•ç³»ç»Ÿï¼Œå®ç°é›¶å¼€é”€èµ„æºæŸ¥è¯¢ï¼** ğŸš€
