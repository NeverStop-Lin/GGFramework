# UIæ¶æ„æ”¹é€  - ä¾èµ–æ¢³ç†æŠ¥å‘Š

> **åˆ›å»ºæ—¶é—´**: 2025-10-26  
> **åˆ†æ”¯**: feature/ui-monobehaviour  
> **ç›®çš„**: è®°å½•UIç³»ç»Ÿçš„æ‰€æœ‰ä¾èµ–å…³ç³»ï¼Œä¸ºæ¶æ„æ”¹é€ åšå‡†å¤‡

---

## 1. ç»§æ‰¿UGUIBaseUIçš„UIç±»æ¸…å•

### 1.1 ç”¨æˆ·UIç±»ï¼ˆ2ä¸ªï¼‰

| UIç±» | è·¯å¾„ | ç±»å‹ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|------|------|------|------|-------|
| **MainMenuUI** | Assets/Game/Scripts/UI/MainMenuUI.cs | Main UI | âœ… æ´»è·ƒ | ğŸ”´ é«˜ |
| **GameUI** | Assets/Game/Scripts/UI/GameUI.cs | Main UI | âœ… æ´»è·ƒ | ğŸ”´ é«˜ |

**æ€»è®¡**: 2ä¸ªç”¨æˆ·UIç±»

### 1.2 åºŸå¼ƒåŸºç±»ï¼ˆ2ä¸ªï¼‰

| ç±» | è·¯å¾„ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| **MainUI** | Assets/Framework/Core/Systems/UI/Deprecated/MainUI.cs | ğŸ”¶ å·²åºŸå¼ƒ | æ ‡è®°[Obsolete] |
| **PopupUI** | Assets/Framework/Core/Systems/UI/Deprecated/PopupUI.cs | ğŸ”¶ å·²åºŸå¼ƒ | æ ‡è®°[Obsolete] |

**è¯´æ˜**: è¿™ä¸¤ä¸ªç±»å·²ç»æ˜¯åºŸå¼ƒç±»ï¼Œä¸éœ€è¦è¿ç§»ã€‚

---

## 2. ä¾èµ–UIç³»ç»Ÿçš„æ¨¡å—

### 2.1 ç›´æ¥ä¾èµ–ï¼ˆé€šè¿‡GridFramework.UIè°ƒç”¨ï¼‰

#### 2.1.1 Launcherï¼ˆå¯åŠ¨å™¨ï¼‰

**æ–‡ä»¶**: `Assets/Game/Launcher.cs`

```csharp
void Start()
{
    GridFramework.UI.Show<MainMenuUI>();  // æ˜¾ç¤ºä¸»èœå•
}
```

**å½±å“**: æ— éœ€ä¿®æ”¹ï¼ˆIUIæ¥å£ä¸å˜ï¼‰

#### 2.1.2 MainMenuUIï¼ˆUIé—´è·³è½¬ï¼‰

**æ–‡ä»¶**: `Assets/Game/Scripts/UI/MainMenuUI.cs`

```csharp
private void OnStartClick()
{
    GridFramework.UI.Show<GameUI>();  // æ˜¾ç¤ºæ¸¸æˆUI
    Hide();  // éšè—è‡ªå·±
}
```

**å½±å“**: æ— éœ€ä¿®æ”¹ï¼ˆIUIæ¥å£ä¸å˜ï¼‰

### 2.2 æ ¸å¿ƒæ¡†æ¶ä¾èµ–

| æ¨¡å— | ä¾èµ–æ–¹å¼ | å½±å“ |
|------|---------|------|
| **GridFramework** | é™æ€è®¿é—® `GridFramework.UI` | âœ… æ— å½±å“ |
| **FrameworkInstaller** | ç»‘å®šIUIæ¥å£ | ğŸŸ¡ éœ€è¦ä¿®æ”¹ï¼ˆæ·»åŠ åŒè½¨ç»‘å®šï¼‰ |
| **UICenter** | ç®¡ç†UIç”Ÿå‘½å‘¨æœŸ | ğŸŸ¡ éœ€è¦ä¿®æ”¹ï¼ˆæ·»åŠ å·¥å‚é€‰æ‹©ï¼‰ |
| **UIFactory** | åˆ›å»ºUIå®ä¾‹ | ğŸ”´ éœ€è¦æ–°å»ºï¼ˆMonoBehaviourç‰ˆæœ¬ï¼‰ |

### 2.3 é—´æ¥ä¾èµ–

| ç³»ç»Ÿ | ä¾èµ–å…³ç³» | å½±å“ |
|------|---------|------|
| **Zenject** | ä¾èµ–æ³¨å…¥ | âœ… æ— å½±å“ï¼ˆç»§ç»­ä½¿ç”¨ï¼‰ |
| **èµ„æºç³»ç»Ÿ** | åŠ è½½UI Prefab | âœ… æ— å½±å“ |
| **äº‹ä»¶ç³»ç»Ÿ** | UIç”Ÿå‘½å‘¨æœŸäº‹ä»¶ | âœ… æ— å½±å“ |

---

## 3. æ ¸å¿ƒæ–‡ä»¶æ¸…å•

### 3.1 éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰

| æ–‡ä»¶ | è·¯å¾„ | æ”¹åŠ¨ç±»å‹ | å¤æ‚åº¦ |
|------|------|---------|-------|
| âœï¸ **IUI.cs** | Assets/Framework/Core/Interface/IUI.cs | ç§»é™¤new()çº¦æŸ | ğŸŸ¢ ç®€å• |
| âœï¸ **FrameworkInstaller.cs** | Assets/Framework/Scripts/Installers/FrameworkInstaller.cs | æ·»åŠ åŒè½¨ç»‘å®š | ğŸŸ¡ ä¸­ç­‰ |
| âœï¸ **UICenter.cs** | Assets/Framework/Core/Systems/UI/Managers/UICenter.cs | æ·»åŠ å·¥å‚é€‰æ‹©é€»è¾‘ | ğŸŸ¡ ä¸­ç­‰ |
| âœï¸ **MainMenuUI.cs** | Assets/Game/Scripts/UI/MainMenuUI.cs | æ›´æ”¹åŸºç±»ç»§æ‰¿ | ğŸŸ¢ ç®€å• |
| âœï¸ **GameUI.cs** | Assets/Game/Scripts/UI/GameUI.cs | æ›´æ”¹åŸºç±»ç»§æ‰¿ | ğŸŸ¢ ç®€å• |

### 3.2 éœ€è¦æ–°å»ºçš„æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ğŸ†• **BaseUIBehaviour.cs** | Assets/Framework/Core/Systems/UI/Core/ | MonoBehaviourç‰ˆæœ¬çš„BaseUI |
| ğŸ†• **UGUIBaseUIBehaviour.cs** | Assets/Framework/Core/Systems/UI/Core/ | MonoBehaviourç‰ˆæœ¬çš„UGUIBaseUI |
| ğŸ†• **UIFactoryBehaviour.cs** | Assets/Framework/Core/Systems/UI/Core/ | MonoBehaviourå·¥å‚ |
| ğŸ†• **UIAttachmentBehaviour.cs** | Assets/Framework/Core/Systems/UI/Attachment/ | MonoBehaviourç‰ˆæœ¬çš„AttachmentåŸºç±» |

### 3.3 ä¿æŒä¸å˜çš„æ–‡ä»¶ï¼ˆå…³é”®ï¼‰

| æ–‡ä»¶ | è¯´æ˜ | åŸå›  |
|------|------|------|
| âœ… **IUI.cs** | UIç®¡ç†æ¥å£ | åªéœ€ç§»é™¤new()çº¦æŸï¼Œæ–¹æ³•ç­¾åä¸å˜ |
| âœ… **IBaseUI.cs** | UIåŸºç±»æ¥å£ | å®Œå…¨ä¸å˜ |
| âœ… **UIConfig.cs** | UIé…ç½®ç±» | å®Œå…¨ä¸å˜ |
| âœ… **æ‰€æœ‰Attachment** | Attachmentç³»ç»Ÿ | æš‚æ—¶ä¿æŒä¸å˜ï¼ˆé˜¶æ®µ1ï¼‰ |
| âœ… **æ‰€æœ‰Manager** | ç®¡ç†å™¨ç³»ç»Ÿ | å®Œå…¨ä¸å˜ |

---

## 4. Prefabèµ„æºæ¸…å•

### 4.1 éœ€è¦è°ƒæ•´çš„Prefabï¼ˆ2ä¸ªï¼‰

| Prefab | è·¯å¾„ | å½“å‰ç»“æ„ | éœ€è¦è°ƒæ•´ |
|--------|------|---------|---------|
| **MainMenuUI** | Assets/Game/Resources/UI/MainMenuUI.prefab | æ ¹èŠ‚ç‚¹æ— UIç»„ä»¶ | âœ… éœ€è¦æ·»åŠ MainMenuUIç»„ä»¶ |
| **GameUI** | Assets/Game/Resources/UI/GameUI.prefab | æ ¹èŠ‚ç‚¹æ— UIç»„ä»¶ | âœ… éœ€è¦æ·»åŠ GameUIç»„ä»¶ |

**è°ƒæ•´æ–¹å¼**: 
1. åœ¨Prefabæ ¹èŠ‚ç‚¹æ·»åŠ å¯¹åº”çš„UIç»„ä»¶
2. ç¡®ä¿æœ‰Canvaså’ŒRectTransformç»„ä»¶
3. ä¿å­˜Prefab

---

## 5. æµ‹è¯•ç‚¹æ¸…å•

### 5.1 åŠŸèƒ½æµ‹è¯•ç‚¹

| åŠŸèƒ½ | æµ‹è¯•æ–¹æ³• | é¢„æœŸç»“æœ |
|------|---------|---------|
| **UIæ˜¾ç¤º** | `GridFramework.UI.Show<MainMenuUI>()` | MainMenuUIæ­£å¸¸æ˜¾ç¤º |
| **UIéšè—** | `GridFramework.UI.Hide<MainMenuUI>()` | MainMenuUIæ­£å¸¸éšè— |
| **UIè·³è½¬** | MainMenuUI â†’ GameUI | è·³è½¬æ­£å¸¸ |
| **æŒ‰é’®äº‹ä»¶** | ç‚¹å‡»StartæŒ‰é’® | å“åº”æ­£å¸¸ |
| **ç”Ÿå‘½å‘¨æœŸ** | OnCreate/OnShow/OnHideå›è°ƒ | å›è°ƒæ­£å¸¸è§¦å‘ |
| **Zenjectæ³¨å…¥** | UIç±»ä¸­çš„[Inject]å­—æ®µ | æ³¨å…¥æ­£å¸¸ |

### 5.2 æ€§èƒ½æµ‹è¯•ç‚¹

| æŒ‡æ ‡ | å½“å‰åŸºå‡† | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|------|---------|------|---------|
| **UIåˆ›å»ºæ—¶é—´** | ~15ms | â‰¤18ms (120%) | Profileræµ‹é‡ |
| **å†…å­˜å ç”¨** | ~18KB/UI | â‰¤20KB (110%) | Profileræµ‹é‡ |
| **GCåˆ†é…** | ~1KB/æ¬¡ | â‰¤1.5KB (150%) | Profileræµ‹é‡ |

---

## 6. é£é™©è¯„ä¼°

### 6.1 é«˜é£é™©ç‚¹

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| **Zenjectæ³¨å…¥å¤±è´¥** | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ | å……åˆ†æµ‹è¯•ï¼Œå‡†å¤‡å›é€€æ–¹æ¡ˆ |
| **ç”Ÿå‘½å‘¨æœŸå†²çª** | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ä½¿ç”¨æ ‡å¿—ä½é˜²æ­¢é‡å¤è§¦å‘ |

### 6.2 ä¸­é£é™©ç‚¹

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| **Prefabç»“æ„è°ƒæ•´é”™è¯¯** | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | é€ä¸ªè°ƒæ•´ï¼Œæ¯æ¬¡æµ‹è¯• |
| **Attachmentç³»ç»Ÿå¤±æ•ˆ** | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | å…ˆä¿æŒæ—§Attachmentä¸å˜ |

---

## 7. è¿ç§»ä¼˜å…ˆçº§

### é˜¶æ®µ1ï¼šæ–°æ¶æ„å¹¶è¡Œï¼ˆ1å‘¨ï¼‰
- âœ… åˆ›å»ºæ–°åŸºç±»
- âœ… æ”¹é€ å·¥å‚å’Œå®‰è£…å™¨
- âœ… æµ‹è¯•åŸºç¡€åŠŸèƒ½

### é˜¶æ®µ2ï¼šè¿ç§»æµ‹è¯•ï¼ˆ3å¤©ï¼‰
1. ğŸ”´ **MainMenuUI** - ä¼˜å…ˆè¿ç§»ï¼ˆå¯åŠ¨æ—¶ä½¿ç”¨ï¼Œæœ€å…³é”®ï¼‰
2. ğŸ”´ **GameUI** - æ¬¡ä¼˜å…ˆè¿ç§»ï¼ˆä¸»è¦æ¸¸æˆç•Œé¢ï¼‰

### é˜¶æ®µ3ï¼šæ¸…ç†ï¼ˆå¯é€‰ï¼‰
- æ ‡è®°æ—§åŸºç±»ä¸º[Obsolete]
- ç§»é™¤åŒè½¨é€»è¾‘

---

## 8. å›é€€ç­–ç•¥

### å¿«é€Ÿå›é€€æ­¥éª¤

1. åˆ‡æ¢å›mainåˆ†æ”¯
   ```bash
   git checkout main
   ```

2. æ¢å¤Prefabï¼ˆå¦‚æœå·²ä¿®æ”¹ï¼‰
   ```bash
   git checkout HEAD -- Assets/Game/Resources/UI/*.prefab
   ```

3. é‡å¯Unity Editor

**é¢„è®¡å›é€€æ—¶é—´**: < 5åˆ†é’Ÿ

---

## 9. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### âœ… å·²å®Œæˆ

- [x] åˆ—å‡ºæ‰€æœ‰UIç±»ï¼ˆ2ä¸ªï¼‰
- [x] åˆ—å‡ºä¾èµ–æ¨¡å—
- [x] è¯„ä¼°é£é™©
- [x] åˆ¶å®šè¿ç§»è®¡åˆ’

### â³ å¾…å®Œæˆ

- [ ] è®°å½•æ€§èƒ½åŸºå‡†
- [ ] åˆ›å»ºæ–°åŸºç±»
- [ ] æ”¹é€ å·¥å‚ç³»ç»Ÿ
- [ ] è¿ç§»ç¬¬ä¸€ä¸ªUI

---

## 10. æ€»ç»“

### å½±å“èŒƒå›´

- **ç”¨æˆ·UIç±»**: 2ä¸ªï¼ˆéœ€è¦è¿ç§»ï¼‰
- **æ ¸å¿ƒæ–‡ä»¶**: 9ä¸ªï¼ˆ5ä¸ªä¿®æ”¹ + 4ä¸ªæ–°å»ºï¼‰
- **Prefab**: 2ä¸ªï¼ˆéœ€è¦è°ƒæ•´ï¼‰
- **å¤–éƒ¨è°ƒç”¨**: æ— éœ€ä¿®æ”¹ï¼ˆIUIæ¥å£ä¸å˜ï¼‰

### å·¥ä½œé‡è¯„ä¼°

- **é˜¶æ®µ1ï¼ˆæ–°æ¶æ„ï¼‰**: 3-5å¤©
- **é˜¶æ®µ2ï¼ˆè¿ç§»æµ‹è¯•ï¼‰**: 2-3å¤©
- **é˜¶æ®µ3ï¼ˆå…¨é‡è¿ç§»ï¼‰**: 1-2å¤©ï¼ˆåªæœ‰2ä¸ªUIï¼‰
- **æ€»è®¡**: 1-2å‘¨

### é£é™©è¯„çº§

**æ•´ä½“é£é™©**: ğŸŸ¢ ä½

**åŸå› **:
1. UIç±»æ•°é‡å°‘ï¼ˆåªæœ‰2ä¸ªï¼‰
2. ä¾èµ–å…³ç³»æ¸…æ™°
3. æœ‰å®Œæ•´å›é€€æ–¹æ¡ˆ
4. é‡‡ç”¨åŒè½¨å¹¶è¡Œç­–ç•¥

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæˆ  
**ä¸‹ä¸€æ­¥**: è®°å½•æ€§èƒ½åŸºå‡†ï¼Œå¼€å§‹é˜¶æ®µ1

