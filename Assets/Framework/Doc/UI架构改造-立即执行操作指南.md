# UIæ¶æ„æ”¹é€  - ç«‹å³æ‰§è¡Œæ“ä½œæŒ‡å—

> **å½“å‰çŠ¶æ€**: ä»£ç ç”Ÿæˆå™¨å·²ä¿®å¤ï¼ŒBindingä»£ç å·²æ‰‹åŠ¨ä¿®å¤  
> **ä¸‹ä¸€æ­¥**: åœ¨Unityä¸­é‡æ–°ç”Ÿæˆä»£ç ï¼ˆå¯é€‰ï¼‰æˆ–ç›´æ¥æµ‹è¯•

---

## âœ… å·²å®Œæˆå·¥ä½œ

- âœ… åˆ›å»ºæ–°çš„MonoBehaviouråŸºç±»
- âœ… ä¿®å¤ä»£ç ç”Ÿæˆå™¨
- âœ… æ‰‹åŠ¨ä¿®å¤MainMenuUI.Binding.cså’ŒGameUI.Binding.cs
- âœ… åˆ‡æ¢åˆ°æ–°å·¥å‚

---

## ğŸ¯ ç°åœ¨æ‚¨æœ‰2ä¸ªé€‰æ‹©

### é€‰é¡¹Aï¼šç›´æ¥æµ‹è¯•ï¼ˆæ¨èï¼Œæœ€å¿«ï¼‰

**å½“å‰çŠ¶æ€**: æ‰‹åŠ¨ä¿®å¤çš„ä»£ç åº”è¯¥å·²ç»å¯ä»¥å·¥ä½œäº†

#### æ“ä½œæ­¥éª¤ï¼ˆ1åˆ†é’Ÿï¼‰ï¼š

1. **åœ¨Unityä¸­æ‰“å¼€Prefabè¿ç§»å·¥å…·**
   - èœå•ï¼š`Tools > Framework > UI Prefab Migration Tool`

2. **ç‚¹å‡»"ä¸€é”®è¿ç§»æ‰€æœ‰UI Prefab"**
   - ç­‰å¾…5ç§’
   - æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æˆåŠŸ

3. **è¿è¡Œæ¸¸æˆæµ‹è¯•**
   - ç‚¹å‡»PlayæŒ‰é’®
   - **ç‚¹å‡»StartæŒ‰é’®** 
   - åº”è¯¥èƒ½æ­£å¸¸è·³è½¬åˆ°GameUIäº†ï¼âœ…

**å¦‚æœæµ‹è¯•é€šè¿‡** â†’ å®Œæˆï¼å¯ä»¥åˆå¹¶åˆ°mainåˆ†æ”¯

---

### é€‰é¡¹Bï¼šé‡æ–°ç”Ÿæˆä»£ç ï¼ˆæ›´æ ‡å‡†ï¼‰

**æ¨èç¨‹åº¦**: â­â­â­â­â­  
**åŸå› **: ç¡®ä¿æœªæ¥ç”Ÿæˆçš„ä»£ç éƒ½æ˜¯æ­£ç¡®çš„

#### æ“ä½œæ­¥éª¤ï¼ˆ2åˆ†é’Ÿï¼‰ï¼š

1. **é‡æ–°ç”ŸæˆMainMenuUIä»£ç **
   - åœ¨Projectçª—å£æ‰¾åˆ° `Assets/Game/Resources/UI/MainMenuUI.prefab`
   - **å³é”®ç‚¹å‡»** Prefab
   - é€‰æ‹© `ç”ŸæˆUIä»£ç `
   - ç‚¹å‡»"ç”Ÿæˆä»£ç "æŒ‰é’®

2. **é‡æ–°ç”ŸæˆGameUIä»£ç **
   - å¯¹ `GameUI.prefab` é‡å¤ä¸Šè¿°æ­¥éª¤

3. **ä½¿ç”¨Prefabè¿ç§»å·¥å…·**
   - èœå•ï¼š`Tools > Framework > UI Prefab Migration Tool`
   - ç‚¹å‡»"ä¸€é”®è¿ç§»æ‰€æœ‰UI Prefab"

4. **è¿è¡Œæ¸¸æˆæµ‹è¯•**
   - ç‚¹å‡»PlayæŒ‰é’®
   - **ç‚¹å‡»StartæŒ‰é’®**
   - åº”è¯¥èƒ½æ­£å¸¸å·¥ä½œï¼âœ…

---

## ğŸ” éªŒè¯ä»£ç æ˜¯å¦æ­£ç¡®

### æ£€æŸ¥MainMenuUI.Binding.cs

æ‰“å¼€æ–‡ä»¶åï¼Œæ£€æŸ¥3ä¸ªå…³é”®ç‚¹ï¼š

#### âœ… æ£€æŸ¥ç‚¹1ï¼šç»§æ‰¿åŸºç±»
```csharp
// ç¬¬18è¡Œåº”è¯¥æ˜¯ï¼š
public partial class MainMenuUI : UGUIBaseUIBehaviour
```

#### âœ… æ£€æŸ¥ç‚¹2ï¼šç»„ä»¶è·¯å¾„
```csharp
// ç¬¬53-55è¡Œåº”è¯¥æ˜¯ï¼š
_startButton = FindComponent<Button>("Panel/@Button_Start");
_settingsButton = FindComponent<Button>("Panel/@Button_Settings");
_titleText = FindComponent<Text>("Panel/@Text_Title");

// æ³¨æ„ï¼šè·¯å¾„ä¸åŒ…å«"MainMenuUI/"å‰ç¼€
```

#### âœ… æ£€æŸ¥ç‚¹3ï¼šç©ºæ£€æŸ¥
```csharp
// ç¬¬78-81è¡Œåº”è¯¥æ˜¯ï¼š
if (_startButton != null)
    _startButton.onClick.RemoveListener(OnStartClick);
if (_settingsButton != null)
    _settingsButton.onClick.RemoveListener(OnSettingsClick);
```

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•

- [ ] MainMenuUIæ­£å¸¸æ˜¾ç¤º
- [ ] StartæŒ‰é’®å¯ä»¥ç‚¹å‡» â† **æ ¸å¿ƒæµ‹è¯•**
- [ ] ç‚¹å‡»Startè·³è½¬åˆ°GameUI
- [ ] GameUIæ­£å¸¸æ˜¾ç¤º
- [ ] è¿”å›åŠŸèƒ½æ­£å¸¸ï¼ˆå¦‚æœæœ‰ï¼‰

### Consoleæ£€æŸ¥

- [ ] æ— çº¢è‰²é”™è¯¯
- [ ] æ— é»„è‰²è­¦å‘Šï¼ˆæˆ–åªæœ‰æ— å…³ç´§è¦çš„è­¦å‘Šï¼‰
- [ ] çœ‹åˆ°æˆåŠŸæ—¥å¿—ï¼š
  ```
  [UICenter] UIæ˜¾ç¤ºæˆåŠŸ: MainMenuUI
  [UGUI] UIæ˜¾ç¤º: MainMenuUI
  ```

### Inspectoræ£€æŸ¥ï¼ˆå¯é€‰ï¼‰

- [ ] åœ¨Hierarchyä¸­èƒ½çœ‹åˆ°MainMenuUI GameObject
- [ ] é€‰ä¸­åInspectoræ˜¾ç¤ºMainMenuUIç»„ä»¶
- [ ] MainMenuUIç»„ä»¶çš„å­—æ®µå¯è§ï¼ˆå¦‚_startButtonç­‰ï¼‰

---

## ğŸ› å¦‚æœä»ç„¶æ²¡ååº”

### è°ƒè¯•æ­¥éª¤ï¼š

1. **æŸ¥çœ‹Consoleé”™è¯¯**
   - æˆªå›¾å‘ç»™æˆ‘
   - ç‰¹åˆ«å…³æ³¨çº¢è‰²é”™è¯¯

2. **æ£€æŸ¥Prefabç»“æ„**
   - æ‰“å¼€MainMenuUI.prefab
   - ç¡®è®¤å±‚çº§ç»“æ„ï¼š
     ```
     MainMenuUI
       â””â”€ Panel
           â”œâ”€ @Button_Start
           â””â”€ @Button_Settings
     ```
   - ç¡®è®¤@Button_Startæœ‰Buttonç»„ä»¶

3. **æ£€æŸ¥ç»„ä»¶æ˜¯å¦æ·»åŠ **
   - é€‰ä¸­MainMenuUIæ ¹èŠ‚ç‚¹
   - Inspectorä¸­åº”è¯¥æœ‰MainMenuUI (Script)ç»„ä»¶
   - å¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨è¿ç§»å·¥å…·æ·»åŠ 

4. **æ‰‹åŠ¨æµ‹è¯•è·¯å¾„**
   - åœ¨MainMenuUI.csçš„OnShowä¸­æ·»åŠ ï¼š
     ```csharp
     protected override void OnShow(params object[] args)
     {
         base.OnShow(args);
         
         // è°ƒè¯•ï¼šæ‰‹åŠ¨æµ‹è¯•æŸ¥æ‰¾
         var testBtn = transform.Find("Panel/@Button_Start");
         Debug.Log($"æ‰¾åˆ°æŒ‰é’®: {testBtn != null}");
     }
     ```

---

## ğŸ“Š æœŸæœ›ç»“æœ

### é‡æ–°ç”Ÿæˆå

âœ… MainMenuUI.Binding.cs ä½¿ç”¨æ­£ç¡®çš„åŸºç±»  
âœ… ç»„ä»¶è·¯å¾„æ­£ç¡®ï¼ˆä¸åŒ…å«æ ¹èŠ‚ç‚¹ï¼‰  
âœ… UnregisterEventsæœ‰ç©ºæ£€æŸ¥  

### è¿è¡Œæ¸¸æˆå

âœ… MainMenuUIæ˜¾ç¤º  
âœ… ç‚¹å‡»StartæŒ‰é’®è·³è½¬åˆ°GameUI  
âœ… Consoleæ— é”™è¯¯  

---

## ğŸš€ æ¨èæ‰§è¡Œé¡ºåº

### æœ€å¿«è·¯å¾„ï¼ˆé€‰é¡¹Aï¼‰ï¼š

```
1. æ‰“å¼€Prefabè¿ç§»å·¥å…· (5ç§’)
2. ç‚¹å‡»"ä¸€é”®è¿ç§»æ‰€æœ‰UI Prefab" (5ç§’)
3. è¿è¡Œæ¸¸æˆæµ‹è¯• (10ç§’)
4. å®Œæˆï¼âœ…
```

**æ€»è€—æ—¶**: < 30ç§’

### æœ€æ ‡å‡†è·¯å¾„ï¼ˆé€‰é¡¹Bï¼‰ï¼š

```
1. é‡æ–°ç”ŸæˆMainMenuUIä»£ç  (30ç§’)
2. é‡æ–°ç”ŸæˆGameUIä»£ç  (30ç§’)
3. ä½¿ç”¨Prefabè¿ç§»å·¥å…· (5ç§’)
4. è¿è¡Œæ¸¸æˆæµ‹è¯• (10ç§’)
5. å®Œæˆï¼âœ…
```

**æ€»è€—æ—¶**: < 2åˆ†é’Ÿ

---

## ğŸ’¡ æˆ‘çš„å»ºè®®

**å¦‚æœå½“å‰æ‰‹åŠ¨ä¿®å¤çš„ä»£ç èƒ½æ­£å¸¸å·¥ä½œ**ï¼š
- é€‰æ‹©é€‰é¡¹Aï¼ˆç›´æ¥æµ‹è¯•ï¼‰
- èŠ‚çœæ—¶é—´

**å¦‚æœæƒ³è¦æœ€æ ‡å‡†çš„å®ç°**ï¼š
- é€‰æ‹©é€‰é¡¹Bï¼ˆé‡æ–°ç”Ÿæˆï¼‰
- ç¡®ä¿æœªæ¥ä¸€è‡´æ€§

**ä¸¤ç§æ–¹å¼æœ€ç»ˆæ•ˆæœå®Œå…¨ä¸€æ ·ï¼** é€‰æ‹©æ‚¨è§‰å¾—èˆ’æœçš„å³å¯ã€‚

---

**è¯·ç°åœ¨åœ¨Unityä¸­æ‰§è¡Œï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœï¼** ğŸš€

